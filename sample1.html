<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
</head>

<body>
<!--5.ページの設定-->
<div data-role="page">

<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>

<script>
//ユーザーの現在の位置情報を取得
navigator.geolocation.getCurrentPosition(successCallback, errorCallback);

function successCallback(position) {
	  var gl_text = "緯度：" + position.coords.latitude + "<br>";
	    gl_text += "経度：" + position.coords.longitude + "<br>";
	    gl_text += "高度：" + position.coords.altitude + "<br>";
	    gl_text += "緯度・経度の誤差：" + position.coords.accuracy + "<br>";
	    gl_text += "高度の誤差：" + position.coords.altitudeAccuracy + "<br>";
	    gl_text += "方角：" + position.coords.heading + "<br>";
	    gl_text += "速度：" + position.coords.speed + "<br>";
	    document.getElementById("show_result").innerHTML = gl_text;

	    var latlng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
	    //var latlng = new google.maps.LatLng(35.685001, 139.751404);
	    var myOptions = {
		    zoom: 10,
		    center: latlng,
		    mapTypeId: google.maps.MapTypeId.ROADMAP
	    };
	    var map = new google.maps.Map(document.getElementById('map_canvas'), myOptions);

	    var marker = new google.maps.Marker({
	        position: latlng,
	        map: map,
	        title:"You are here!"
	    });
}

/***** 位置情報が取得できない場合 *****/
function errorCallback(error) {
  var err_msg = "";
  switch(error.code)
  {
    case 1:
      err_msg = "位置情報の利用が許可されていません";
      break;
    case 2:
      err_msg = "デバイスの位置が判定できません";
      break;
    case 3:
      err_msg = "タイムアウトしました";
      break;
  }
  document.getElementById("show_result").innerHTML = err_msg;
  //デバッグ用→　document.getElementById("show_result").innerHTML = error.message;
}



</script>

<style>
<!--
#map_canvas {
    width:100%;
    height:400px;
    border:4px solid #fff;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
}
-->
</style>

<!--6.ヘッダーの設定-->
<div data-role="header">
    <h1>jQuery Mobileサンプルページ</h1>
</div>

<!--7.ページ内容の設定-->
<div data-role="contennt" id="map_content">
	<p>あなたの現在位置</p>
	<div id="show_result"></div>
	<div id="map_canvas">a</div>
</div>


<!--8.フッターの設定-->
<div data-role="footer">
    <h3>Codezine</h3>
</div>

</div>
</body>
</html>